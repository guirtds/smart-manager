CREATE TABLE CLIENTE (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    EMAIL VARCHAR2(255) NOT NULL,
    EMPRESA_ID NUMBER,
    CONSTRAINT CLIENTE_EMAIL_FORMAT CHECK (REGEXP_LIKE(EMAIL, '^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+$'))
);

-- FK para a tabela EMPRESA
ALTER TABLE CLIENTE
ADD CONSTRAINT FK_CLIENTE_EMPRESA
FOREIGN KEY (EMPRESA_ID)
REFERENCES EMPRESA(ID);


CREATE TABLE EMPRESA (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    ENDERECO VARCHAR2(255) NOT NULL
);

CREATE TABLE TRANSACAO (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    VALOR NUMBER(10, 2) NOT NULL,
    DATA DATE NOT NULL,
    CLIENTE_ID NUMBER,
    CONSTRAINT FK_TRANSACAO_CLIENTE
        FOREIGN KEY (CLIENTE_ID)
        REFERENCES CLIENTE(ID)
);


SELECT * FROM CLIENTE;

SELECT * FROM EMPRESA;

